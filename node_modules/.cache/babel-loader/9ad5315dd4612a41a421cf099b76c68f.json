{"ast":null,"code":"import { fromJS } from 'immutable';\nimport * as constants from './constants';\nimport { actionCreators } from \"./index\";\n/*\n * 添加窗口\n */\n\nexport var addWindowList = function addWindowList(list) {\n  return {\n    type: constants.ADD_WINDOW_LIST,\n    openWindowList: fromJS(list)\n  };\n};\n/*\n * 打开的菜单栏\n * @param Object menuNav 菜单项\n */\n\nexport var openMenuNav = function openMenuNav(menuNav) {\n  return {\n    type: constants.OPEN_MENU_NAV,\n    menuNav: fromJS(menuNav)\n  };\n};\n/*\n * 清空访问菜单栏数据\n */\n\nexport var clearMenuNav = function clearMenuNav() {\n  return {\n    type: constants.CLEAR_MENU_NAV,\n    isEnterMenu: false,\n    isEnterMenuNav: false,\n    openMenuNav: fromJS({})\n  };\n};\n/*\n * 鼠标进入菜单栏\n */\n\nexport var mouseEnterMenu = function mouseEnterMenu() {\n  return {\n    type: constants.MOUSE_ENTER_MENU,\n    isEnterMenu: true\n  };\n};\n/*\n * 鼠标离开菜单栏\n */\n\nexport var mouseLeavelMenu = function mouseLeavelMenu() {\n  return {\n    type: constants.MOUSE_LEAVEL_MENU,\n    isEnterMenu: false\n  };\n};\n/*\n * 鼠标进入菜单选择栏\n */\n\nexport var mouseEnterMenuNav = function mouseEnterMenuNav() {\n  return {\n    type: constants.MOUSE_ENTER_MENU_NAV,\n    isEnterMenuNav: true\n  };\n};\n/*\n * 鼠标离开菜单选择栏\n */\n\nexport var mouseLeavelMenuNav = function mouseLeavelMenuNav() {\n  return {\n    type: constants.MOUSE_LEAVEL_MENU_NAV,\n    isEnterMenuNav: false\n  };\n};\n/*\n * 关闭窗口\n * @param string type 窗口类型\n */\n\nexport var closeWindow = function closeWindow(type, openWindowList) {\n  var index = openWindowList.findIndex(function (row) {\n    return row.type === type;\n  });\n  var list = openWindowList;\n  list.splice(index, 1);\n  return {\n    type: constants.CLOSE_WINDOW,\n    openWindowList: fromJS(list)\n  };\n};\n/*\n * 隐藏窗口\n */\n\nexport var hiddenWindow = function hiddenWindow(window, windowList) {\n  var index = windowList.findIndex(function (row) {\n    return row.type === window.type;\n  });\n  windowList[index].isShow = false;\n  return {\n    type: constants.HIDDEN_WINDOW,\n    windowList: fromJS(windowList)\n  };\n};\n/*\n * 显示窗口\n */\n\nexport var showWindow = function showWindow(windowList) {\n  return {\n    type: constants.SHOW_WINDOW,\n    windowList: fromJS(windowList)\n  };\n};\n/*\n * 读取窗口完成\n */\n\nexport var loadWindow = function loadWindow(window, openWindowList) {\n  var openWindowIndex = openWindowList.findIndex(function (row) {\n    return row.type === window.type;\n  });\n  var list = openWindowList;\n  list[openWindowIndex].isLoad = true;\n  return {\n    type: constants.LOAD_WINDOW,\n    windowList: fromJS(list)\n  };\n};\n/*\n * 设置日期\n */\n\nexport var setDateTime = function setDateTime(dataTime) {\n  return {\n    type: constants.SET_DATE_TIME,\n    dataTime: fromJS(dataTime)\n  };\n};\n/*\n * 处理增加或者显示窗口数据\n * @param window Object 窗口对象\n * @param array openWindowList 已打开窗口列表\n */\n\nexport var setWindowOpenList = function setWindowOpenList(window, openWindowList) {\n  return function (dispatch) {\n    var openWindowIndex = openWindowList.findIndex(function (row) {\n      return row.type === window.type;\n    });\n    var list = openWindowList;\n\n    if (openWindowIndex >= 0) {\n      //判断窗口是否已打开\n      var zIndexMax = Math.max.apply(Math, openWindowList.map(function (o) {\n        return o.zIndex;\n      }));\n      var zIndex = openWindowList[openWindowIndex].zIndex;\n      list[openWindowIndex].isShow = true;\n\n      if (zIndexMax !== zIndex) {\n        //点击窗口不是最顶层窗口\n        list.forEach(function (row, i) {\n          if (i === openWindowIndex) {\n            list[i].zIndex = openWindowList.length * 10 - 10;\n            list[i].isTop = true; //是否为最顶层\n          } else {\n            list[i].zIndex = row.zIndex - 10;\n            list[i].isTop = false;\n          }\n        });\n      }\n\n      dispatch(actionCreators.showWindow(list));\n    } else {\n      list.forEach(function (row, i) {\n        list[i].isTop = false;\n      });\n      var windowObj = window;\n      windowObj.zIndex = list.length * 10;\n      windowObj.isTop = true;\n      windowObj.isLoad = false;\n      list.push(windowObj);\n      dispatch(actionCreators.addWindowList(list));\n    }\n  };\n};\n/*\n * 鼠标访问菜单\n */\n\nexport var handleOpenNav = function handleOpenNav(e, menuNav) {\n  var type = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'nav';\n  return function (dispatch) {\n    var menu = menuNav;\n    var style = {\n      top: e.currentTarget.offsetTop + 26,\n      left: e.currentTarget.offsetLeft\n    };\n\n    if (type === 'nav') {\n      style.left += 33;\n    }\n\n    menu.style = style;\n    dispatch(actionCreators.openMenuNav(menu));\n    dispatch(actionCreators.mouseEnterMenu());\n  };\n};","map":{"version":3,"sources":["/Users/linjiajun/Desktop/htdoc/web/react-desktops/src/pages/Home/store/actionCreators.js"],"names":["fromJS","constants","actionCreators","addWindowList","list","type","ADD_WINDOW_LIST","openWindowList","openMenuNav","menuNav","OPEN_MENU_NAV","clearMenuNav","CLEAR_MENU_NAV","isEnterMenu","isEnterMenuNav","mouseEnterMenu","MOUSE_ENTER_MENU","mouseLeavelMenu","MOUSE_LEAVEL_MENU","mouseEnterMenuNav","MOUSE_ENTER_MENU_NAV","mouseLeavelMenuNav","MOUSE_LEAVEL_MENU_NAV","closeWindow","index","findIndex","row","splice","CLOSE_WINDOW","hiddenWindow","window","windowList","isShow","HIDDEN_WINDOW","showWindow","SHOW_WINDOW","loadWindow","openWindowIndex","isLoad","LOAD_WINDOW","setDateTime","dataTime","SET_DATE_TIME","setWindowOpenList","dispatch","zIndexMax","Math","max","apply","map","o","zIndex","forEach","i","length","isTop","windowObj","push","handleOpenNav","e","menu","style","top","currentTarget","offsetTop","left","offsetLeft"],"mappings":"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","sourcesContent":["import { fromJS } from 'immutable'\nimport * as constants from './constants'\nimport {actionCreators} from \"./index\";\n\n/*\n * 添加窗口\n */\nexport const addWindowList = (list) => ({\n  type: constants.ADD_WINDOW_LIST,\n  openWindowList: fromJS(list)\n})\n/*\n * 打开的菜单栏\n * @param Object menuNav 菜单项\n */\nexport const openMenuNav = (menuNav) => ({\n  type: constants.OPEN_MENU_NAV,\n  menuNav: fromJS(menuNav)\n})\n/*\n * 清空访问菜单栏数据\n */\nexport const clearMenuNav = () => ({\n  type: constants.CLEAR_MENU_NAV,\n  isEnterMenu:false,\n  isEnterMenuNav:false,\n  openMenuNav: fromJS({})\n})\n/*\n * 鼠标进入菜单栏\n */\nexport const mouseEnterMenu = () => ({\n  type: constants.MOUSE_ENTER_MENU,\n  isEnterMenu: true\n})\n/*\n * 鼠标离开菜单栏\n */\nexport const mouseLeavelMenu = () => ({\n  type: constants.MOUSE_LEAVEL_MENU,\n  isEnterMenu: false\n})\n/*\n * 鼠标进入菜单选择栏\n */\nexport const mouseEnterMenuNav = () => ({\n  type: constants.MOUSE_ENTER_MENU_NAV,\n  isEnterMenuNav: true\n})\n/*\n * 鼠标离开菜单选择栏\n */\nexport const mouseLeavelMenuNav = () => ({\n  type: constants.MOUSE_LEAVEL_MENU_NAV,\n  isEnterMenuNav: false\n})\n/*\n * 关闭窗口\n * @param string type 窗口类型\n */\nexport const closeWindow = (type,openWindowList) => {\n  const index = openWindowList.findIndex((row)=>{\n    return row.type === type\n  })\n  const list = openWindowList\n  list.splice(index,1)\n  return {\n    type:constants.CLOSE_WINDOW,\n    openWindowList:fromJS(list)\n  }\n}\n/*\n * 隐藏窗口\n */\nexport const hiddenWindow = (window,windowList) => {\n  const index = windowList.findIndex((row)=>(\n    row.type === window.type\n  ))\n  windowList[index].isShow = false\n  return{\n    type:constants.HIDDEN_WINDOW,\n    windowList:fromJS(windowList)\n  }\n}\n/*\n * 显示窗口\n */\nexport const showWindow = (windowList) => ({\n  type:constants.SHOW_WINDOW,\n  windowList:fromJS(windowList)\n})\n/*\n * 读取窗口完成\n */\nexport const loadWindow = (window,openWindowList) => {\n    const openWindowIndex = openWindowList.findIndex((row) => {\n      return row.type === window.type\n    })\n    let list = openWindowList\n    list[openWindowIndex].isLoad = true\n    return {\n      type: constants.LOAD_WINDOW,\n      windowList:fromJS(list)\n    }\n}\n/*\n * 设置日期\n */\nexport const setDateTime = (dataTime) => ({\n  type:constants.SET_DATE_TIME,\n  dataTime: fromJS(dataTime)\n})\n/*\n * 处理增加或者显示窗口数据\n * @param window Object 窗口对象\n * @param array openWindowList 已打开窗口列表\n */\nexport const setWindowOpenList = (window,openWindowList) => {\n  return (dispatch) => {\n    const openWindowIndex = openWindowList.findIndex((row) => {\n      return row.type === window.type\n    })\n    let list = openWindowList\n    if (openWindowIndex >= 0) { //判断窗口是否已打开\n      const zIndexMax = Math.max.apply(Math, openWindowList.map((o) => o.zIndex))\n      const zIndex = openWindowList[openWindowIndex].zIndex\n      list[openWindowIndex].isShow = true\n      if (zIndexMax !== zIndex) {  //点击窗口不是最顶层窗口\n        list.forEach((row, i) => {\n          if (i === openWindowIndex) {\n            list[i].zIndex = (openWindowList.length * 10) - 10\n            list[i].isTop = true  //是否为最顶层\n          } else {\n            list[i].zIndex = row.zIndex - 10\n            list[i].isTop = false\n          }\n        })\n      }\n      dispatch(actionCreators.showWindow(list))\n    } else {\n      list.forEach((row, i) => {\n        list[i].isTop = false\n      })\n      let windowObj = window\n      windowObj.zIndex = list.length * 10\n      windowObj.isTop = true\n      windowObj.isLoad = false\n      list.push(windowObj)\n      dispatch(actionCreators.addWindowList(list))\n    }\n  }\n}\n/*\n * 鼠标访问菜单\n */\nexport const handleOpenNav = (e,menuNav,type='nav') => {\n  return (dispatch)=> {\n    let menu = menuNav\n    const style = {\n      top:e.currentTarget.offsetTop+26,\n      left:e.currentTarget.offsetLeft\n    }\n    if(type==='nav'){\n      style.left += 33\n    }\n    menu.style = style\n    dispatch(actionCreators.openMenuNav(menu))\n    dispatch(actionCreators.mouseEnterMenu())\n  }\n}"]},"metadata":{},"sourceType":"module"}